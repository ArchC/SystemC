language: cpp

compiler:
  - clang
  - gcc

os:
  - linux
  - osx

before_install:
  - echo $LANG
  - echo $LC_ALL
  - uname -a
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo apt-get update && sudo apt-get install -y build-essential linux-headers-$(uname -r) clang-3.7 llvm-3.7 ; fi
  - if [ $TRAVIS_OS_NAME == osx ]; then brew update && brew install llvm37 && brew link --force llvm37; fi

script:
  - autoreconf -vif
  - CFLAGS="-Ofast -Wall -Wextra" ./configure
  - make -j3
  - make check

notifications:
  email: false
  irc: 
    channels:
      - "chat.freenode.net#ArchC"
    on_success: change
    on_failure: always
    on_start: false
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/924e5aa7cc88ca8e0fec
    on_success: change
    on_failure: always
    on_start: false

